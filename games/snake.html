<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>Snake</title>
<style>
    body { text-align: center; font-family: sans-serif; margin-top: 20px; }
    canvas { background: #eee; display: block; margin: 0 auto; border: 2px solid #333; }
    #score { font-weight: bold; margin-top: 10px; }
    h2 {
        color: #3498db;
        margin: 50px;
    }
</style>
</head>

<body>
    <h2>Snake</h2>
    <canvas id="game" width="400" height="400"></canvas>
    <div id="score">Punkte: 0</div>
</body>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const gridSize = 20;
    const tileSize = canvas.width / gridSize;

    let snake = [{x: 10, y: 10}];
    let direction = {x: 1, y: 0};
    let food = {};
    let score = 0;
    let gameOver = false;

    function placeFood() {
        food.x = Math.floor(Math.random() * gridSize);
        food.y = Math.floor(Math.random() * gridSize);
        while(snake.some(s => s.x === food.x && s.y === food.y)) {
        food.x = Math.floor(Math.random() * gridSize);
        food.y = Math.floor(Math.random() * gridSize);
        }
    }

    function drawGrid() {
        ctx.strokeStyle = '#ccc';
        for(let i=0; i<=gridSize; i++) {

        ctx.beginPath();
        ctx.moveTo(i * tileSize, 0);
        ctx.lineTo(i * tileSize, canvas.height);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(0, i * tileSize);
        ctx.lineTo(canvas.width, i * tileSize);
        ctx.stroke();
        }
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawGrid();

        ctx.fillStyle = 'green';
        snake.forEach(part => {
        ctx.fillRect(part.x * tileSize, part.y * tileSize, tileSize, tileSize);
        });

        ctx.fillStyle = 'red';
        ctx.fillRect(food.x * tileSize, food.y * tileSize, tileSize, tileSize);
    }

    function update() {
        if(gameOver) return;

        const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };

        if(head.x < 0 || head.x >= gridSize || head.y < 0 || head.y >= gridSize) {
        gameOver = true;
        document.getElementById('score').textContent += " - Game Over!";
        return;
        }

        if(snake.some(part => part.x === head.x && part.y === head.y)) {
        gameOver = true;
        document.getElementById('score').textContent += " - Game Over!";
        return;
        }

        snake.unshift(head);

        if(head.x === food.x && head.y === food.y) {
        score++;
        document.getElementById('score').textContent = 'Punkte: ' + score;
        placeFood();
        } else {
        snake.pop();
        }

        draw();
    }

    document.addEventListener('keydown', e => {
        if(e.key === 'ArrowUp' && direction.y !== 1) direction = {x: 0, y: -1};
        else if(e.key === 'ArrowDown' && direction.y !== -1) direction = {x: 0, y: 1};
        else if(e.key === 'ArrowLeft' && direction.x !== 1) direction = {x: -1, y: 0};
        else if(e.key === 'ArrowRight' && direction.x !== -1) direction = {x: 1, y: 0};
    });

    placeFood();
    draw();
    setInterval(update, 150);
</script>

</html>